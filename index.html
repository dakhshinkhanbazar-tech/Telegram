<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat</title>
</head>
<body style="margin:0; padding:2px; background-color:#fff;">

    <div style="background:#075e54; color:white; padding:5px; text-align:center;">
        <b>‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶¨‡ßã‡¶∞‡ßç‡¶°</b>
    </div>

    <div style="padding:5px; text-align:center; background:#eee;">
        <a href="https://docs.google.com/forms/d/e/1FAIpQLSc4j4-Zgynnz6ImFtr5y4wic1jpv-EtFmykCg3IHge9oVtaFQ/viewform" style="background:#25d366; color:black; padding:5px; text-decoration:none; border:1px solid #000; font-size:12px;">‚úâ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®</a>
        &nbsp;
        <a href="javascript:location.reload()" style="background:#fff; color:black; padding:5px; text-decoration:none; border:1px solid #000; font-size:12px;">üîÑ ‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂</a>
    </div>

    <div id="chat-list" style="margin-top:5px;">
        ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...
    </div>

    <script>
        var dbUrl = "https://telegram-c10ce-default-rtdb.firebaseio.com/chats/global.json";

        function load() {
            var x = new XMLHttpRequest();
            x.open("GET", dbUrl, true);
            x.onreadystatechange = function () {
                if (x.readyState == 4 && x.status == 200) {
                    var data = JSON.parse(x.responseText);
                    var res = "";
                    if (!data) {
                        document.getElementById('chat-list').innerHTML = "‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶®‡¶æ‡¶á";
                        return;
                    }
                    var keys = Object.keys(data).reverse();
                    for (var i = 0; i < keys.length; i++) {
                        var k = keys[i];
                        // ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶õ‡¶ø ‡¶Ø‡¶æ‡¶§‡ßá ‡¶¨‡¶æ‡¶ü‡¶® ‡¶´‡ßã‡¶®‡ßá ‡¶´‡¶æ‡¶Å‡¶ï‡¶æ ‡¶ú‡¶æ‡ßü‡¶ó‡¶æ ‡¶è‡¶ï‡¶¶‡¶Æ ‡¶ï‡¶Æ ‡¶•‡¶æ‡¶ï‡ßá
                        res += "<div style='border-bottom:1px solid #ddd; padding:2px;'>"+
                               "<b style='color:#075e54; font-size:13px;'>" + data[k].sender + ":</b> "+
                               "<span style='font-size:14px;'>" + data[k].message + "</span>"+
                               "</div>";
                    }
                    document.getElementById('chat-list').innerHTML = res;
                }
            };
            x.send();
        }
        load();
        setInterval(load, 15000); // ‡¶ú‡¶æ‡¶≠‡¶æ ‡¶´‡ßã‡¶®‡ßá‡¶∞ ‡¶ö‡¶æ‡¶™‡ßá‡¶∞ ‡¶ï‡¶•‡¶æ ‡¶≠‡ßá‡¶¨‡ßá ‡ßß‡ß´ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡¶≤‡ßã
    </script>

</body>
</html>
